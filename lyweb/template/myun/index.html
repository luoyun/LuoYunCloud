<%inherit file="myun_base.html" />

<%block name="sidemain">

<div class="myun-user-action">
  <a class="ly-btn2 medium blue" href="${ reverse_url('appliance:upload') }">${_("Upload Appliance")}</a>
  <a class="ly-btn2 medium blue" 
     title="${ _('Create a new instance') }"
     href="${ reverse_url('instance:create') }">
    ${ _("Create New Instance") }</a>
</div>

% if hasattr(current_user, 'profile'):
<div id="myun-pie-show" class="c">
  <div class="pie" id="myun-cpu-pie"></div>
  <div class="pie" id="myun-mem-pie"></div>
  <div class="pie" id="myun-instance-pie"></div>
  <div class="pie" id="myun-storage-pie"></div>
</div>

<script language="JavaScript" src="${ static_url('FusionCharts/JSClass/FusionCharts.js') }"></script>
<script type="text/javascript">
  var cpuData = '${ chart_data("cpu") }';
  var cpuChart = new FusionCharts("/static/FusionCharts/Charts/FCF_Pie3D.swf", "cpuChartId", "360", "160");
  cpuChart.setDataXML(cpuData);
  cpuChart.render("myun-cpu-pie");

  var memData = '${ chart_data("memory") }';
  var memChart = new FusionCharts("/static/FusionCharts/Charts/FCF_Pie3D.swf", "memChartId", "360", "160");
  memChart.setDataXML(memData);
  memChart.render("myun-mem-pie");

  var instanceData = '${ chart_data("instance") }';
  var instanceChart = new FusionCharts("/static/FusionCharts/Charts/FCF_Pie3D.swf", "instanceChartId", "360", "160");
  instanceChart.setDataXML(instanceData);
  instanceChart.render("myun-instance-pie");

  var storageData = '${ chart_data("storage") }';
  var storageChart = new FusionCharts("/static/FusionCharts/Charts/FCF_Pie3D.swf", "storageChartId", "360", "160");
  storageChart.setDataXML(storageData);
  storageChart.render("myun-storage-pie");
</script>
% else:
<p class="ywarn">${ _("Get your profile data failed.") }</p>
% endif

</%block>
